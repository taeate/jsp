<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper
     namespace="com.taeate.example.demo.Repository.ArticleRepository">
    <insert id ="writeArticle">
        insert into article
        set regDate = now(),
        updateDate = now(),
        title = #{title},
        `body` = #{body}
    </insert>
    
    <select id ="getArticle" resultType="Article">
        select * from article
        where id = #{id}
    </select>

    <select id = "getArticles" resultType="Article">
        select * from article 
        order by id DESC
    </select>

    <select id = "getLastInsertId" resultType = "int">
       select last_insert_id()
    </select>

    <delete id ="deleteArticle">
        delete from article
        where id = #{id}
    </delete>

    <update id = "ModifyArticle">
        update article
        <set>
            <if test="title != null and title != ''">
            title = #{title},
            </if>
            <if test="body != null and body != ''">
            `body` = #{body},
            </if>
        updateDate = now()
        </set>
        where id = #{id}
    </update>
</mapper>